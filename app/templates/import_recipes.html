{% extends "base.html" %}
{% block content %}
<div class="mb-4">
  <a href="/recipes?lang={{ lang }}" class="text-blue-700 hover:underline">← {{ S('back') }}</a>
</div>

<h1 class="text-2xl font-bold mb-4">{{ S('import') }}</h1>

<div class="bg-white rounded-lg border p-6 max-w-xl">
  <form action="/import?lang={{ lang }}" method="post" enctype="multipart/form-data" class="space-y-3">
    <div class="relative">
      <input
        type="file"
        name="file"
        id="file-input"
        accept=".csv"
        required
        class="block w-full text-sm file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"
      />
    </div>
    <button class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">
      {{ S('import') }}
    </button>
  </form>

  {% if message %}
    <p class="mt-4 text-sm {{ 'text-green-700' if '✅' in message else 'text-red-700' }}">
      {{ message }}
    </p>
  {% endif %}
</div>

<script>
  // Traduire les textes du bouton "Choisir un fichier" selon la langue
  const translations = {
    fr: {
      choose: "{{ S('choose_file') }}",
      noFile: "{{ S('no_file_chosen') }}"
    },
    jp: {
      choose: "{{ S('choose_file') }}",
      noFile: "{{ S('no_file_chosen') }}"
    }
  };

  const lang = "{{ lang }}";
  const fileInput = document.getElementById('file-input');

  // Note: Les navigateurs ne permettent pas de traduire le texte du bouton "Parcourir"/"Browse"
  // Mais on peut afficher un message personnalisé quand aucun fichier n'est sélectionné
  fileInput.addEventListener('change', function(e) {
    if (this.files.length === 0) {
      console.log(translations[lang].noFile);
    }
  });
</script>
{% endblock %}